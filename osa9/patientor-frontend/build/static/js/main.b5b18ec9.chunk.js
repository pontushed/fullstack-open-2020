(this.webpackJsonppatientor=this.webpackJsonppatientor||[]).push([[0],{266:function(e,a,t){e.exports=t(443)},443:function(e,a,t){"use strict";t.r(a);var n,r,l=t(0),c=t.n(l),i=t(61),o=t.n(i),s=(t(270),t(30)),u=t.n(s),d=t(51),m=t(18),p=t(44),E=t.n(p),h=t(74),b=t(54),f=t(451),v=t(462),g=t(459),y=t(452),C="http://localhost:3001/api",O=t(257),k=t(86),S=t(22),D=function(e){return{type:"SET_CURRENT_PATIENT",payload:e}},j=function(e){return{type:"ADD_PATIENT",payload:e}},T={currentPatient:null,patients:{},diagnoses:[]},w=Object(l.createContext)([T,function(){return T}]),N=function(e){var a=e.reducer,t=e.children,n=Object(l.useReducer)(a,T),r=Object(m.a)(n,2),i=r[0],o=r[1];return c.a.createElement(w.Provider,{value:[i,o]},t)},H=function(){return Object(l.useContext)(w)},x=t(458),F=t(454),R=t(461),A=t(460),P=t(15),L=t(453),V=t(457),_=function(e){var a=e.name,t=e.label,n=e.options;return c.a.createElement(L.a.Field,null,c.a.createElement("label",null,t),c.a.createElement(P.b,{as:"select",name:a,className:"ui dropdown"},n.map((function(e){return c.a.createElement("option",{key:e.value,value:e.value},e.label||e.value)}))))},I=function(e){var a=e.field,t=e.label,n=e.placeholder;return c.a.createElement(L.a.Field,null,c.a.createElement("label",null,t),c.a.createElement(P.b,Object.assign({placeholder:n},a)),c.a.createElement("div",{style:{color:"red"}},c.a.createElement(P.a,{name:a.name})))},M=function(e){var a=e.field,t=e.label,n=e.min,r=e.max;return c.a.createElement(L.a.Field,null,c.a.createElement("label",null,t),c.a.createElement(P.b,Object.assign({},a,{type:"number",min:n,max:r})),c.a.createElement("div",{style:{color:"red"}},c.a.createElement(P.a,{name:a.name})))},B=function(e){var a=e.diagnoses,t=e.setFieldValue,n=e.setFieldTouched,r="diagnosisCodes",l=a.map((function(e){return{key:e.code,text:"".concat(e.name," (").concat(e.code,")"),value:e.code}}));return c.a.createElement(L.a.Field,null,c.a.createElement("label",null,"Diagnoses"),c.a.createElement(V.a,{fluid:!0,multiple:!0,search:!0,selection:!0,options:l,onChange:function(e,a){n(r,!0),t(r,a.value)}}),c.a.createElement(P.a,{name:r}))};!function(e){e.Male="male",e.Female="female",e.Other="other"}(n||(n={})),function(e){e[e.Healthy=0]="Healthy",e[e.LowRisk=1]="LowRisk",e[e.HighRisk=2]="HighRisk",e[e.CriticalRisk=3]="CriticalRisk"}(r||(r={}));var q=[{value:n.Male,label:"Male"},{value:n.Female,label:"Female"},{value:n.Other,label:"Other"}],Y=function(e){var a=e.onSubmit,t=e.onCancel;return c.a.createElement(P.d,{initialValues:{name:"",ssn:"",dateOfBirth:"",occupation:"",gender:n.Other},onSubmit:a,validate:function(e){var a={};return e.name||(a.name="Field is required"),e.ssn||(a.ssn="Field is required"),e.dateOfBirth||(a.dateOfBirth="Field is required"),e.occupation||(a.occupation="Field is required"),a}},(function(e){var a=e.isValid,n=e.dirty;return c.a.createElement(P.c,{className:"form ui"},c.a.createElement(P.b,{label:"Name",placeholder:"Name",name:"name",component:I}),c.a.createElement(P.b,{label:"Social Security Number",placeholder:"SSN",name:"ssn",component:I}),c.a.createElement(P.b,{label:"Date Of Birth",placeholder:"YYYY-MM-DD",name:"dateOfBirth",component:I}),c.a.createElement(P.b,{label:"Occupation",placeholder:"Occupation",name:"occupation",component:I}),c.a.createElement(_,{label:"Gender",name:"gender",options:q}),c.a.createElement(A.a,null,c.a.createElement(A.a.Column,{floated:"left",width:5},c.a.createElement(g.a,{type:"button",onClick:t,color:"red"},"Cancel")),c.a.createElement(A.a.Column,{floated:"right",width:5},c.a.createElement(g.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},G=function(e){var a=e.modalOpen,t=e.onClose,n=e.onSubmit,r=e.error;return c.a.createElement(F.a,{open:a,onClose:t,centered:!1,closeIcon:!0},c.a.createElement(F.a.Header,null,"Add a new patient"),c.a.createElement(F.a.Content,null,r&&c.a.createElement(R.a,{inverted:!0,color:"red"},"Error: ".concat(r)),c.a.createElement(Y,{onSubmit:n,onCancel:t})))},z=t(464),J=["The patient is in great shape","The patient has a low risk of getting sick","The patient has a high risk of getting sick","The patient has a diagnosed condition"],U=function(e){var a=e.rating,t=e.showText;return c.a.createElement("div",{className:"health-bar"},c.a.createElement(z.a,{icon:"heart",disabled:!0,rating:4-a,maxRating:4}),t?c.a.createElement("p",null,J[a]):null)},K=function(){var e=H(),a=Object(m.a)(e,2),t=a[0].patients,n=a[1],r=c.a.useState(!1),l=Object(m.a)(r,2),i=l[0],o=l[1],s=c.a.useState(),p=Object(m.a)(s,2),b=p[0],v=p[1],y=function(){o(!1),v(void 0)},O=function(){var e=Object(d.a)(u.a.mark((function e(a){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.post("".concat(C,"/patients"),a);case 3:t=e.sent,r=t.data,n(j(r)),y(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0.response.data),v(e.t0.response.data.error);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"App"},c.a.createElement(f.a,{textAlign:"center"},c.a.createElement("h3",null,"Patient list")),c.a.createElement(x.a,{celled:!0},c.a.createElement(x.a.Header,null,c.a.createElement(x.a.Row,null,c.a.createElement(x.a.HeaderCell,null,"Name"),c.a.createElement(x.a.HeaderCell,null,"Gender"),c.a.createElement(x.a.HeaderCell,null,"Occupation"),c.a.createElement(x.a.HeaderCell,null,"Health Rating"),c.a.createElement(x.a.HeaderCell,null))),c.a.createElement(x.a.Body,null,Object.values(t).map((function(e){return c.a.createElement(x.a.Row,{key:e.id},c.a.createElement(x.a.Cell,null,e.name),c.a.createElement(x.a.Cell,null,e.gender),c.a.createElement(x.a.Cell,null,e.occupation),c.a.createElement(x.a.Cell,null,c.a.createElement(U,{showText:!1,rating:1})),c.a.createElement(x.a.Cell,null,c.a.createElement(g.a,{as:h.b,to:"/patients/".concat(e.id)},"Show details")))})))),c.a.createElement(G,{modalOpen:i,onSubmit:O,error:b,onClose:y}),c.a.createElement(g.a,{onClick:function(){return o(!0)}},"Add New Patient"))},Q=t(77),W=t(456),X=function(e){var a=e.entry;return c.a.createElement(c.a.Fragment,null,c.a.createElement(W.a.Header,null,a.date),c.a.createElement(W.a.Meta,null,"Specialist: ",a.specialist),c.a.createElement(W.a.Description,{style:{marginBottom:"1em"}},a.description))},Z=function(e){var a,t=e.entry,n=H(),r=Object(m.a)(n,1)[0].diagnoses;return t.diagnosisCodes?c.a.createElement(W.a.Extra,null,c.a.createElement("h5",{style:{marginTop:"0.5em"}},"Diagnoses:"),null===(a=t.diagnosisCodes)||void 0===a?void 0:a.map((function(e,a){var t;return c.a.createElement("div",{key:a,className:"item"},e,": ",null===(t=function(e,a){return a.find((function(a){return a.code===e}))}(e,r))||void 0===t?void 0:t.name)}))):null},$=function(e){var a=e.entry;return c.a.createElement(W.a,null,c.a.createElement(W.a.Content,null,c.a.createElement(Q.a,{name:"hospital",size:"big"}),c.a.createElement(X,{entry:a}),c.a.createElement("div",null,"Discharge from ",a.discharge.date," until:"," ",a.discharge.criteria),c.a.createElement(Z,{entry:a})))},ee=function(e){var a,t,n=e.entry;return c.a.createElement(W.a,null,c.a.createElement(W.a.Content,null,c.a.createElement(Q.a,{name:"doctor",size:"big"}),c.a.createElement(X,{entry:n}),c.a.createElement("div",null,"Employer: ",n.employerName),n.sickLeave?c.a.createElement("div",null,"Sick leave from ",null===(a=n.sickLeave)||void 0===a?void 0:a.startDate," to"," ",null===(t=n.sickLeave)||void 0===t?void 0:t.endDate):null,c.a.createElement(Z,{entry:n})))},ae=function(e){var a=e.entry;return c.a.createElement(W.a,null,c.a.createElement(W.a.Content,null,c.a.createElement(Q.a,{name:"calendar check",size:"big"}),c.a.createElement(X,{entry:a}),c.a.createElement(z.a,{icon:"heart",defaultRating:4-a.healthCheckRating,maxRating:4,disabled:!0}),c.a.createElement(Z,{entry:a})))},te=function(e){var a=e.entry;switch(a.type){case"Hospital":return c.a.createElement($,{entry:a});case"OccupationalHealthcare":return c.a.createElement(ee,{entry:a});case"HealthCheck":return c.a.createElement(ae,{entry:a});default:return function(e){throw new Error("Unhandled discriminated union member: ".concat(JSON.stringify(e)))}(a)}},ne=function(e){var a=e.onSubmit,t=e.onCancel,n=H(),r=Object(m.a)(n,1)[0].diagnoses;return c.a.createElement(P.d,{initialValues:{type:"OccupationalHealthcare",description:"",date:"",specialist:"",diagnosisCodes:[],employerName:"",sickLeave:{startDate:"",endDate:""}},onSubmit:a,validate:function(e){var a="This field is required",t={};return e.description||(t.description=a),Date.parse(e.date)||(t.date="Malformatted date"),e.date||(t.date=a),e.specialist||(t.specialist=a),e.employerName||(t.employerName=a),e.sickLeave&&(Date.parse(e.sickLeave.startDate)||(t.sickLeave={startDate:"Malformatted date"}),Date.parse(e.sickLeave.endDate)||(t.sickLeave={endDate:"Malformatted date"})),t}},(function(e){var a=e.isValid,n=e.dirty,l=e.setFieldValue,i=e.setFieldTouched;return c.a.createElement(P.c,{className:"form ui"},c.a.createElement(P.b,{label:"Description",placeholder:"Description",name:"description",component:I}),c.a.createElement(P.b,{label:"Date",placeholder:"Date",name:"date",component:I}),c.a.createElement(P.b,{label:"Specialist",placeholder:"Specialist",name:"specialist",component:I}),c.a.createElement(P.b,{label:"Employer name",placeholder:"Employer name",name:"employerName",component:I}),c.a.createElement(P.b,{label:"Sick leave from",placeholder:"Sick leave from",name:"sickLeave.startDate",component:I}),c.a.createElement(P.b,{label:"Sick leave to",placeholder:"Sick leave to",name:"sickLeave.endDate",component:I}),c.a.createElement(B,{setFieldValue:l,setFieldTouched:i,diagnoses:Object.values(r)}),c.a.createElement(A.a,null,c.a.createElement(A.a.Column,{floated:"left",width:5},c.a.createElement(g.a,{type:"button",onClick:t,color:"red"},"Cancel")),c.a.createElement(A.a.Column,{floated:"right",width:5},c.a.createElement(g.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},re=function(e){var a=e.entryType,t=e.setEntryType;return c.a.createElement("div",{style:{marginBottom:"1em"}},c.a.createElement("h4",null,"Select entry type"),c.a.createElement(g.a,{className:"HealthCheck"===a?"primary":"",onClick:function(){return t("HealthCheck")}},"Health Check"),c.a.createElement(g.a,{className:"Hospital"===a?"primary":"",onClick:function(){return t("Hospital")}},"Hospital"),c.a.createElement(g.a,{className:"OccupationalHealthcare"===a?"primary":"",onClick:function(){return t("OccupationalHealthcare")}},"Occupational Healthcare"))},le=function(e){var a=e.onSubmit,t=e.onCancel,n=H(),r=Object(m.a)(n,1)[0].diagnoses;return c.a.createElement(P.d,{initialValues:{type:"Hospital",description:"",date:"",specialist:"",diagnosisCodes:[],discharge:{date:"",criteria:""}},onSubmit:a,validate:function(e){var a="This field is required",t={};return e.description||(t.description=a),Date.parse(e.date)||(t.date="Malformatted date"),e.date||(t.date=a),e.specialist||(t.specialist=a),e.discharge.date||(t.discharge={date:a}),Date.parse(e.discharge.date)||(t.discharge={date:"Malformatted date"}),e.discharge.criteria||(t.discharge={criteria:a}),t}},(function(e){var a=e.isValid,n=e.dirty,l=e.setFieldValue,i=e.setFieldTouched;return c.a.createElement(P.c,{className:"form ui"},c.a.createElement(P.b,{label:"Description",placeholder:"Description",name:"description",component:I}),c.a.createElement(P.b,{label:"Date",placeholder:"Date",name:"date",component:I}),c.a.createElement(P.b,{label:"Specialist",placeholder:"Specialist",name:"specialist",component:I}),c.a.createElement(P.b,{label:"Discharge date",placeholder:"Discharge date",name:"discharge.date",component:I}),c.a.createElement(P.b,{label:"Discharge criteria",placeholder:"Discharge criteria",name:"discharge.criteria",component:I}),c.a.createElement(B,{setFieldValue:l,setFieldTouched:i,diagnoses:Object.values(r)}),c.a.createElement(A.a,null,c.a.createElement(A.a.Column,{floated:"left",width:5},c.a.createElement(g.a,{type:"button",onClick:t,color:"red"},"Cancel")),c.a.createElement(A.a.Column,{floated:"right",width:5},c.a.createElement(g.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},ce=function(e){var a=e.onSubmit,t=e.onCancel,n=H(),r=Object(m.a)(n,1)[0].diagnoses;return c.a.createElement(P.d,{initialValues:{type:"HealthCheck",description:"",date:"",specialist:"",diagnosisCodes:[],healthCheckRating:0},onSubmit:a,validate:function(e){var a={};return e.description||(a.description="This field is required"),Date.parse(e.date)||(a.date="Malformatted date"),e.date||(a.date="This field is required"),e.specialist||(a.specialist="This field is required"),(e.healthCheckRating<0||e.healthCheckRating>3)&&(a.healthCheckRating="The health check rating must be between 0 and 3"),a}},(function(e){var a=e.isValid,n=e.dirty,l=e.setFieldValue,i=e.setFieldTouched;return c.a.createElement(P.c,{className:"form ui"},c.a.createElement(P.b,{label:"Description",placeholder:"Description",name:"description",component:I}),c.a.createElement(P.b,{label:"Date",placeholder:"Date",name:"date",component:I}),c.a.createElement(P.b,{label:"Specialist",placeholder:"Specialist",name:"specialist",component:I}),c.a.createElement(P.b,{label:"Health check rating",name:"healthCheckRating",component:M,min:0,max:3}),c.a.createElement(B,{setFieldValue:l,setFieldTouched:i,diagnoses:Object.values(r)}),c.a.createElement(A.a,null,c.a.createElement(A.a.Column,{floated:"left",width:5},c.a.createElement(g.a,{type:"button",onClick:t,color:"red"},"Cancel")),c.a.createElement(A.a.Column,{floated:"right",width:5},c.a.createElement(g.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},ie=function(e){var a=e.modalOpen,t=e.onClose,n=e.onSubmit,r=e.error,i=Object(l.useState)("HealthCheck"),o=Object(m.a)(i,2),s=o[0],u=o[1];return c.a.createElement(F.a,{open:a,onClose:t,centered:!1,closeIcon:!0},c.a.createElement(F.a.Header,null,"Add new entry"),c.a.createElement(F.a.Content,null,r&&c.a.createElement(R.a,{inverted:!0,color:"red"},"Error: ".concat(r)),c.a.createElement(re,{entryType:s,setEntryType:u}),"HealthCheck"===s&&c.a.createElement(ce,{onSubmit:n,onCancel:t}),"Hospital"===s&&c.a.createElement(le,{onSubmit:n,onCancel:t}),"OccupationalHealthcare"===s&&c.a.createElement(ne,{onSubmit:n,onCancel:t})))},oe=function(){var e=H(),a=Object(m.a)(e,2),t=a[0].currentPatient,n=a[1],r=c.a.useState(!1),l=Object(m.a)(r,2),i=l[0],o=l[1],s=function(){o(!1)},p=function(){var e=Object(d.a)(u.a.mark((function e(a){var r,l,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=null===t||void 0===t?void 0:t.id,e.next=4,E.a.post("".concat(C,"/patients/").concat(r,"/entries"),a);case 4:l=e.sent,c=l.data,s(),n({type:"ADD_ENTRY",payload:c}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.response.data);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(a){return e.apply(this,arguments)}}(),h=Object(b.f)().id;return c.a.useEffect((function(){var e=function(){var e=Object(d.a)(u.a.mark((function e(){var a,t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("".concat(C,"/patients/").concat(h));case 3:a=e.sent,t=a.data,n(D(t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();(null===t||void 0===t?void 0:t.id)!==h&&(console.log("Fetching patient with id ".concat(h," from api")),e())}),[n,t,h]),null===t?c.a.createElement("div",null,"Loading..."):c.a.createElement("div",{className:"App"},c.a.createElement(f.a,null,c.a.createElement("h3",null,t.name,c.a.createElement(Q.a,{className:"male"===t.gender?"mars":"venus"})),c.a.createElement("div",null,"Social Security Number: ",t.ssn),c.a.createElement("div",null,"Date of birth: ",t.dateOfBirth),c.a.createElement("div",null,"Occupation: ",t.occupation),t.entries.length>0&&c.a.createElement(c.a.Fragment,null,c.a.createElement("h4",null,"Entries"),c.a.createElement(W.a.Group,{divided:!0},t.entries.map((function(e){return c.a.createElement(te,{key:e.id,entry:e})})))),c.a.createElement(ie,{modalOpen:i,onSubmit:p,error:"",onClose:s}),c.a.createElement(g.a,{onClick:function(){return o(!0)}},"Add new entry")))},se=function(){var e=H(),a=Object(m.a)(e,2)[1];return c.a.useEffect((function(){E.a.get("".concat(C,"/ping")),function(){var e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("".concat(C,"/patients"));case 3:t=e.sent,n=t.data,a({type:"SET_PATIENT_LIST",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()(),function(){var e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("".concat(C,"/diagnoses"));case 3:t=e.sent,n=t.data,a({type:"SET_DIAGNOSES",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[a]),c.a.createElement("div",{className:"App"},c.a.createElement(h.a,null,c.a.createElement(f.a,null,c.a.createElement(v.a,{as:"h1"},"Patientor"),c.a.createElement(g.a,{as:h.b,to:"/",primary:!0},"Home"),c.a.createElement(y.a,{hidden:!0}),c.a.createElement(b.c,null,c.a.createElement(b.a,{path:"/patients/:id",render:function(){return c.a.createElement(oe,null)}}),c.a.createElement(b.a,{path:"/",render:function(){return c.a.createElement(K,null)}})))))};o.a.render(c.a.createElement(N,{reducer:function(e,a){switch(a.type){case"SET_PATIENT_LIST":return Object(S.a)(Object(S.a)({},e),{},{patients:Object(S.a)(Object(S.a)({},a.payload.reduce((function(e,a){return Object(S.a)(Object(S.a)({},e),{},Object(k.a)({},a.id,a))}),{})),e.patients)});case"ADD_PATIENT":return Object(S.a)(Object(S.a)({},e),{},{patients:Object(S.a)(Object(S.a)({},e.patients),{},Object(k.a)({},a.payload.id,a.payload))});case"SET_CURRENT_PATIENT":return Object(S.a)(Object(S.a)({},e),{},{currentPatient:a.payload});case"SET_DIAGNOSES":return Object(S.a)(Object(S.a)({},e),{},{diagnoses:a.payload});case"ADD_ENTRY":return null===e.currentPatient?e:Object(S.a)(Object(S.a)({},e),{},{currentPatient:Object(S.a)(Object(S.a)({},e.currentPatient),{},{entries:[].concat(Object(O.a)(e.currentPatient.entries),[a.payload])})});default:return e}}},c.a.createElement(se,null)),document.getElementById("root"))}},[[266,1,2]]]);
//# sourceMappingURL=main.b5b18ec9.chunk.js.map